{% extends "base.html" %}

{% block content %}
<h2>Welcome, Coach {{ user.name }}</h2>

<!-- Add date filter form -->
<form method="GET" class="mb-4">
    <div class="row align-items-end">
        <div class="col-auto">
            <label for="date_filter">Filter by Date:</label>
            <input type="date" id="date_filter" name="date_filter" class="form-control" 
                   value="{{ selected_date }}">
        </div>
        <div class="col-auto">
            <button type="submit" class="btn btn-primary">Filter</button>
            <a href="{{ url_for('dashboard') }}" class="btn btn-secondary">Reset</a>
        </div>
    </div>
</form>

<h3>Registrations</h3>
<form method="POST" action="{{ url_for('check_users') }}">
    <input type="hidden" name="date_filter" value="{{ selected_date }}">
    <table class="table">
        <thead>
            <tr>
                <th>User Name</th>
                <th>Session Location</th>
                <th>Session Day</th>
                <th>Session Date</th>
                <th>Time</th>
                <th>Mark Attendance</th>
            </tr>
        </thead>
        <tbody>
            {% for reg in registrations %}
            <tr>
                <td>{{ reg.user_name }}</td>
                <td>{{ reg.location }}</td>
                <td>{{ reg.day }}</td>
                <td>{{ reg.session_date.strftime('%Y-%m-%d') }}</td>
                <td>{{ reg.start_time }} - {{ reg.end_time }}</td>
                <td>
                    <input type="checkbox" name="checked_users" value="{{ reg.Registration.id }}">
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <button type="submit" class="btn btn-primary">Submit Attendance</button>
</form>

{% if not registrations %}
<p>No registrations found for the selected date.</p>
{% endif %}
{% endblock %} 